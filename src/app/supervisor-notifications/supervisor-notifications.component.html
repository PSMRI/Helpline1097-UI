<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <label class="pull-left">
      <h4 class="f-s-b m-b-30"> Notifications </h4>
    </label>
  </div>
</div>
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <form (ngSubmit)="onSubmitShowForm()" #showNotificationForm="ngForm">
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15">
      <md-select placeholder="Notification Type" name="notificationType" ngModel required [style.width]="'100%'">
        <md-option *ngFor="let notification of notificationTypes" [value]="notification.notificationTypeID" (click)="checkNotificationType(notification.notificationType)">
          {{ notification.notificationType }}
        </md-option>
      </md-select>
    </div>
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15" *ngIf="show==0 && visibility_Flag">
      <md-select placeholder="Select Roles" [multiple]="true" name="roles" ngModel [style.width]="'100%'">
        <md-option *ngFor="let role of roleObjArray" [value]="role.RoleID">
          {{ role.RoleName }}
        </md-option>
      </md-select>
    </div>
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15" *ngIf="show==3 && visibility_Flag">
      <md-select placeholder="Offices" [multiple]="true" name="Offices" ngModel [style.width]="'100%'" required>
        <md-option *ngFor="let item of offices" [value]="item.pSAddMapID">
          {{ item.locationName }}
        </md-option>
      </md-select>
    </div>
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15" *ngIf="show==1 && visibility_Flag">
      <md-select placeholder="Language" [multiple]="true" name="Languages" ngModel [style.width]="'100%'" required>
        <md-option *ngFor="let item of languages" [value]="item.languageID">
          {{ item.languageName }}
        </md-option>
      </md-select>
    </div>
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15" *ngIf="show==2 && visibility_Flag">
      <md-select placeholder="Users" name="Users" ngModel [style.width]="'100%'" required>
        <md-option *ngFor="let item of users" [value]="item.userID">
          {{ (item.firstName?item.firstName:"")+" "+(item.middleName?item.middleName:"")+" "+(item.lastName?item.lastName:"") }}
        </md-option>
      </md-select>
    </div>
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-2" >
      <md2-datepicker name="startDate" [disabled]="!visibility_Flag" (keydown)="blockey($event)" placeholder="Valid From" #startDate="ngModel" ngModel required [style.width]="'100%'"></md2-datepicker>
    </div>
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-2" >
      <md2-datepicker name="endDate" [disabled]="!visibility_Flag" (keydown)="blockey($event)" placeholder="Valid Till" [min]="startDate?.value" #endDate="ngModel" ngModel required [style.width]="'100%'"></md2-datepicker>
      <br>
      <span class="help-block m-l-15" *ngIf="(endDate?.value < startDate?.value) && endDate.dirty">End Date cannot be before Start Date!</span>
    </div>
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15">
      <button class="pull-right" md-raised-button color="primary" [disabled]="!(showNotificationForm.valid)" type="submit">Submit</button>
    </div>
    <!-- <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15" *ngIf="!onConfigSubmit"> -->
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 m-t-15">
      <button class="pull-right" type="button" md-raised-button color="primary" (click)="createNotification()">Create Notification</button>
    </div>
  </form>
</div>
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-15" *ngIf="onConfigSubmit">
  <table class="table table-hover" [md2Data]="notifications" #md2="md2DataTable" [rowsPerPage]="3">
    <thead>
      <tr>
        <th>S.No</th>
        <th>Notification Subject</th>
        <th>Notification Description</th>
        <th>Valid From</th>
        <th>Valid Till</th>
        <th>Edit</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="notifications?.length < 1">
        <td class="t-a-c" colspan="6">
          No Records Found
        </td>
      </tr>
      <tr *ngFor="let row of md2.data;let i = index ">
        <td width=10%>{{(md2.activePage-1)*3+i+1}}</td>
        <td width=20%>{{row.notification}}</td>
        <td width=30%>{{row.notificationDesc}}</td>
        <td width=20%>{{row.validFrom|date:'dd/MM/yyyy'}}</td>
        <td width=20%>{{row.validTill|date:'dd/MM/yyyy'}}</td>
        <td>
          <a (click)="onEditClick(row,$event)">
            <md-icon color="">mode_edit</md-icon>
          </a>
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="6">
          <md2-pagination></md2-pagination>
        </td>
      </tr>
    </tfoot>
  </table>
</div>
